{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="{% static 'css/homepage.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
    <!-- Header Section -->
    <header class="header-section">
        <div class="header-container">
            <h1 class="header-title">Employee<span> Management</span></h1>
        </div>
        <div>
            <button type="button" class="my-profile-btn">My Profile</button>
        </div>
    </header>

    <!-- Employee Search Section -->
    <section class="employee-search-section">
        <div class="custom-container">
            <form class="employee-search-form">
                <div class="input-container">
                    <label for="employeeSearchInput" class="visually-hidden">Search for employees or departments</label>
                    <input type="text" id="employeeSearchInput" placeholder="Search for employees..." class="search-box" />
                    <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/14bee0bbb12d2f4804a9b9e4e4606e502cebe20d45d7673f5a82548f81b2b830?placeholderIfAbsent=true&apiKey=7d34c187c61d4dedb88861d765416b13" alt="" class="search-icon" />
                </div>
                <button type="button" class="employee-search-btn">Search</button>
                <button type="button" class="create-employee-btn" onclick="toggleForm('createEmployeeForm')">Create Employee</button>
                <a href=" {% url 'view_field' %} " class="add-edit-btn">Add/Edit Fields</a>
                
            </form>
        </div>
    </section>

    <!-- Forms Section -->
     
    <section class="forms-section">
        <div id="createEmployeeForm" class="form-container hidden">
            <h3>Create Employee</h3>
            {% if field_datas %}

            <form class="form-layout">

                {% for field_data in field_datas %}
                <input type = {% if field_data.field_type == 'Text' %} "text" 
                              {% elif field_data.field_type == 'Number' %} "number"
                              {% elif field_data.field_type == 'Date' %} "date"
                              {% elif field_data.field_type == 'Password' %} "password"
                              {% endif %} 
                              placeholder=" {{ field_data.form_field }} " class="form-control">
                {% endfor %}
            
                <button type="button" class="submit-btn">Submit</button>

            </form>
            
            {% else %}
            <h5 style="text-align: center;" class="text-danger">No fields available...</h5>
            {% endif %}
        </div>
    </section>

    <!-- Bootstrap-styled Table -->
    {% if field_datas %}
    <table class="table table-striped">
        <thead>
            <tr>
                {% for field_data in field_datas %}
                <th scope="col"> {{ field_data.form_field }} </th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for employeeobj in employeeobjs %}
                <tr>
                    <th scope="row">{{ employeeobj.employee_number }}</th>
                    <td>{{ employeeobj.name }}</td>
                    <td>{{ employeeobj.department }}</td>
                    <td>{{ employeeobj.role }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <h3 style="text-align: center;" class="text-danger">No fields available...</h3>
    {% endif %}

    

    <script>
        function toggleForm(sectionId) {
            const forms = document.querySelectorAll('.form-container');
            forms.forEach(form => {
                if (form.id !== sectionId) {
                    form.classList.add('hidden');
                }
            });

            const section = document.getElementById(sectionId);
            section.classList.toggle('hidden');
        }
    </script>
</body>

</html>
